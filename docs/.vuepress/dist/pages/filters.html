<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Filters | Sharp</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/docs/assets/css/0.styles.45ff706c.css" as="style"><link rel="preload" href="/docs/assets/js/app.d35b854f.js" as="script"><link rel="preload" href="/docs/assets/js/2.28d25c3a.js" as="script"><link rel="preload" href="/docs/assets/js/7.b27c5da3.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.2f07b12e.js"><link rel="prefetch" href="/docs/assets/js/11.c82522db.js"><link rel="prefetch" href="/docs/assets/js/12.5a16158d.js"><link rel="prefetch" href="/docs/assets/js/13.bd3144fe.js"><link rel="prefetch" href="/docs/assets/js/14.cc51dee7.js"><link rel="prefetch" href="/docs/assets/js/15.7840a5ff.js"><link rel="prefetch" href="/docs/assets/js/16.3d4ea371.js"><link rel="prefetch" href="/docs/assets/js/17.00979891.js"><link rel="prefetch" href="/docs/assets/js/18.7306a70a.js"><link rel="prefetch" href="/docs/assets/js/19.b994eca8.js"><link rel="prefetch" href="/docs/assets/js/20.13b939c7.js"><link rel="prefetch" href="/docs/assets/js/21.75c0fb97.js"><link rel="prefetch" href="/docs/assets/js/22.98a38388.js"><link rel="prefetch" href="/docs/assets/js/23.1d04222f.js"><link rel="prefetch" href="/docs/assets/js/24.d3883e1a.js"><link rel="prefetch" href="/docs/assets/js/25.ae3289b7.js"><link rel="prefetch" href="/docs/assets/js/26.cd71f960.js"><link rel="prefetch" href="/docs/assets/js/27.36d37de3.js"><link rel="prefetch" href="/docs/assets/js/28.917a79a6.js"><link rel="prefetch" href="/docs/assets/js/29.8c9255cd.js"><link rel="prefetch" href="/docs/assets/js/3.801a0f1f.js"><link rel="prefetch" href="/docs/assets/js/30.087497ee.js"><link rel="prefetch" href="/docs/assets/js/31.9fe51453.js"><link rel="prefetch" href="/docs/assets/js/32.c4f441cd.js"><link rel="prefetch" href="/docs/assets/js/33.64112f32.js"><link rel="prefetch" href="/docs/assets/js/34.86f6f9c4.js"><link rel="prefetch" href="/docs/assets/js/35.5a11d244.js"><link rel="prefetch" href="/docs/assets/js/36.b2a2e364.js"><link rel="prefetch" href="/docs/assets/js/37.18dff1fc.js"><link rel="prefetch" href="/docs/assets/js/38.b913068f.js"><link rel="prefetch" href="/docs/assets/js/39.5750674e.js"><link rel="prefetch" href="/docs/assets/js/4.b4264eaf.js"><link rel="prefetch" href="/docs/assets/js/40.39b92f3e.js"><link rel="prefetch" href="/docs/assets/js/41.68489848.js"><link rel="prefetch" href="/docs/assets/js/42.1d03c8f0.js"><link rel="prefetch" href="/docs/assets/js/43.8faf9d55.js"><link rel="prefetch" href="/docs/assets/js/44.b41ed712.js"><link rel="prefetch" href="/docs/assets/js/5.4605cff7.js"><link rel="prefetch" href="/docs/assets/js/6.d2ccfc69.js"><link rel="prefetch" href="/docs/assets/js/8.ec144814.js"><link rel="prefetch" href="/docs/assets/js/9.e2ac747a.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.45ff706c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">Sharp</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">Home</a></div><div class="nav-item"><a href="/docs/pages/" class="nav-link router-link-active">Documentation</a></div><div class="nav-item"><a href="https://github.com/code16/sharp" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://medium.com/code16/tagged/sharp" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Medium
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">Home</a></div><div class="nav-item"><a href="/docs/pages/" class="nav-link router-link-active">Documentation</a></div><div class="nav-item"><a href="https://github.com/code16/sharp" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://medium.com/code16/tagged/sharp" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Medium
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Introduction</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/pages/" class="sidebar-link">Getting started</a></li><li><a href="/docs/pages/authentication.html" class="sidebar-link">Authentication</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Entity Lists</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/pages/building-entity-list.html" class="sidebar-link">Building an Entity List</a></li><li><a href="/docs/pages/filters.html" class="active sidebar-link">Filters</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/pages/filters.html#generator" class="sidebar-link">Generator</a></li><li class="sidebar-sub-header"><a href="/docs/pages/filters.html#write-the-filter-class" class="sidebar-link">Write the filter class</a></li><li class="sidebar-sub-header"><a href="/docs/pages/filters.html#configure-the-filter" class="sidebar-link">Configure the filter</a></li><li class="sidebar-sub-header"><a href="/docs/pages/filters.html#handle-filter-selection" class="sidebar-link">Handle filter selection</a></li><li class="sidebar-sub-header"><a href="/docs/pages/filters.html#required-filters" class="sidebar-link">Required filters</a></li><li class="sidebar-sub-header"><a href="/docs/pages/filters.html#multiple-filter" class="sidebar-link">Multiple filter</a></li><li class="sidebar-sub-header"><a href="/docs/pages/filters.html#filter-label" class="sidebar-link">Filter label</a></li><li class="sidebar-sub-header"><a href="/docs/pages/filters.html#filter-search" class="sidebar-link">Filter search</a></li><li class="sidebar-sub-header"><a href="/docs/pages/filters.html#filter-template" class="sidebar-link">Filter template</a></li><li class="sidebar-sub-header"><a href="/docs/pages/filters.html#filter-set-callback" class="sidebar-link">Filter set callback</a></li><li class="sidebar-sub-header"><a href="/docs/pages/filters.html#master-filter" class="sidebar-link">Master filter</a></li><li class="sidebar-sub-header"><a href="/docs/pages/filters.html#retained-filters-value-in-session" class="sidebar-link">Retained filters value in session</a></li><li class="sidebar-sub-header"><a href="/docs/pages/filters.html#filters-for-dashboards" class="sidebar-link">Filters for Dashboards</a></li><li class="sidebar-sub-header"><a href="/docs/pages/filters.html#global-menu-filters" class="sidebar-link">Global menu Filters</a></li></ul></li><li><a href="/docs/pages/commands.html" class="sidebar-link">Commands</a></li><li><a href="/docs/pages/entity-states.html" class="sidebar-link">Entity States</a></li><li><a href="/docs/pages/reordering-instances.html" class="sidebar-link">Reordering instances</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Entity Forms</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/pages/building-entity-form.html" class="sidebar-link">Building an Entity Form</a></li><li><a href="/docs/pages/entity-authorizations.html" class="sidebar-link">Entity authorizations</a></li><li><a href="/docs/pages/multiforms.html" class="sidebar-link">Multi-Forms</a></li><li><a href="/docs/pages/custom-form-fields.html" class="sidebar-link">Custom form field</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Form fields</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/pages/form-fields/text.html" class="sidebar-link">Text</a></li><li><a href="/docs/pages/form-fields/textarea.html" class="sidebar-link">Textarea</a></li><li><a href="/docs/pages/form-fields/markdown.html" class="sidebar-link">Markdown</a></li><li><a href="/docs/pages/form-fields/wysiwyg.html" class="sidebar-link">Wysiwyg</a></li><li><a href="/docs/pages/form-fields/number.html" class="sidebar-link">Number</a></li><li><a href="/docs/pages/form-fields/html.html" class="sidebar-link">Html</a></li><li><a href="/docs/pages/form-fields/check.html" class="sidebar-link">Check</a></li><li><a href="/docs/pages/form-fields/date.html" class="sidebar-link">Date</a></li><li><a href="/docs/pages/form-fields/upload.html" class="sidebar-link">Upload</a></li><li><a href="/docs/pages/form-fields/select.html" class="sidebar-link">Select</a></li><li><a href="/docs/pages/form-fields/autocomplete.html" class="sidebar-link">Autocomplete</a></li><li><a href="/docs/pages/form-fields/tags.html" class="sidebar-link">Tags</a></li><li><a href="/docs/pages/form-fields/list.html" class="sidebar-link">List</a></li><li><a href="/docs/pages/form-fields/autocomplete-list.html" class="sidebar-link">AutocompleteList</a></li><li><a href="/docs/pages/form-fields/geolocation.html" class="sidebar-link">Geolocation</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Dashboard</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/pages/dashboard.html" class="sidebar-link">Create a Dashboard</a></li><li><a href="/docs/pages/dashboard-widgets/graph.html" class="sidebar-link">Graph widget</a></li><li><a href="/docs/pages/dashboard-widgets/panel.html" class="sidebar-link">Panel widget</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Generalities</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/pages/building-menu.html" class="sidebar-link">Building the menu</a></li><li><a href="/docs/pages/how-to-transform-data.html" class="sidebar-link">How to transform data</a></li><li><a href="/docs/pages/context.html" class="sidebar-link">Sharp Context</a></li><li><a href="/docs/pages/sharp-built-in-solution-for-uploads.html" class="sidebar-link">Sharp built-in solution for uploads</a></li><li><a href="/docs/pages/form-data-localization.html" class="sidebar-link">Form data localization</a></li><li><a href="/docs/pages/testing-with-sharp.html" class="sidebar-link">Testing with Sharp</a></li><li><a href="/docs/pages/artisan-generators.html" class="sidebar-link">Artisan Generators</a></li><li><a href="/docs/pages/style-visual-theme.html" class="sidebar-link">Style &amp; Visual Theme</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="filters"><a href="#filters" aria-hidden="true" class="header-anchor">#</a> Filters</h1> <p>Filters are a simple way for the user to filter list items or dashboard (see below) widgets on some attribute, like for instance display only books that cost more than 15 euros.</p> <p>This documentation is written for the EntityList case, but the API is the same for Dashboard (as explained at the end of this page).</p> <h2 id="generator"><a href="#generator" aria-hidden="true" class="header-anchor">#</a> Generator</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>php artisan sharp:make:list-filter <span class="token operator">&lt;</span>class_name<span class="token operator">&gt;</span> <span class="token punctuation">[</span>--required,--multiple<span class="token punctuation">]</span>
</code></pre></div><h2 id="write-the-filter-class"><a href="#write-the-filter-class" aria-hidden="true" class="header-anchor">#</a> Write the filter class</h2> <p>First, we need to write a class which implements the <code class="inline">Code16\<span class="token package">Sharp<span class="token punctuation">\</span>EntityList<span class="token punctuation">\</span>EntityListFilter</span></code> interface, and therefore declare a <code class="inline"><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code> function. This function must return an [&quot;id&quot; =&gt; &quot;label&quot;] array. For instance, with Eloquent:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name">SpaceshipTypeFilter</span> <span class="token keyword">implements</span> <span class="token class-name">EntityListFilter</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> SpaceshipType<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;label&quot;</span><span class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">pluck</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;label&quot;</span><span class="token punctuation">,</span> <span class="token double-quoted-string string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="configure-the-filter"><a href="#configure-the-filter" aria-hidden="true" class="header-anchor">#</a> Configure the filter</h2> <p>Next, in the EntityList, we add the filter in the configuration:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">function</span> <span class="token function">buildListConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">setInstanceIdAttribute</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;id&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;type&quot;</span><span class="token punctuation">,</span> SpaceshipTypeFilter<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Sharp will display a dropdown with those values for a &quot;type&quot; filter.</p> <h2 id="handle-filter-selection"><a href="#handle-filter-selection" aria-hidden="true" class="header-anchor">#</a> Handle filter selection</h2> <p>Once the user clicked on a filter, Sharp will call EntityList's <code class="inline"><span class="token function">getListData</span><span class="token punctuation">(</span>EntityListQueryParams <span class="token variable">$params</span><span class="token punctuation">)</span></code> with the filter value in param, which can be grabbed with <code class="inline"><span class="token variable">$params</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">filterFor</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;key&quot;</span><span class="token punctuation">)</span></code>. For instance:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">function</span> <span class="token function">getListData</span><span class="token punctuation">(</span>EntityListQueryParams <span class="token variable">$params</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$spaceships</span> <span class="token operator">=</span> Spaceship<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;spaceships.*&quot;</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">distinct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$params</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">filterFor</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;type&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$spaceships</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;type_id&quot;</span><span class="token punctuation">,</span> <span class="token variable">$params</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">filterFor</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;type&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="required-filters"><a href="#required-filters" aria-hidden="true" class="header-anchor">#</a> Required filters</h2> <p>Sometimes we'd like to have a filter which can't be null. Just implement <code class="inline">Code16\<span class="token package">Sharp<span class="token punctuation">\</span>EntityList<span class="token punctuation">\</span>EntityListRequiredFilter</span></code> subinterface:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name">SpaceshipTypeFilter</span> <span class="token keyword">implements</span> <span class="token class-name">EntityListRequiredFilter</span>
<span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> SpaceshipType<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;label&quot;</span><span class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">pluck</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;label&quot;</span><span class="token punctuation">,</span> <span class="token double-quoted-string string">&quot;id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">defaultValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> SpaceshipType<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;label&quot;</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">id</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You'll have to declare another function, <code class="inline"><span class="token function">defaultValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code>, which must return the id of the default filter if nothing selected.</p> <h2 id="multiple-filter"><a href="#multiple-filter" aria-hidden="true" class="header-anchor">#</a> Multiple filter</h2> <p>First, notice that you can have as many filters as you want for an EntityList. The &quot;multiple filter&quot; here designate something else: allowing the user to select more than one value for a filter. To achieve this, simply replace the interface implemented with <code class="inline">Code16\<span class="token package">Sharp<span class="token punctuation">\</span>EntityList<span class="token punctuation">\</span>EntityListMultipleFilter</span></code>, and that's it.</p> <p>In this case, with Eloquent for instance, your might have to modify your code to ensure that you have an array (Sharp will return either null, and id or an array of id, depending on the user selection):</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$params</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">filterFor</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;pilots&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$spaceships</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">whereIn</span><span class="token punctuation">(</span>
        <span class="token double-quoted-string string">&quot;pilots.id&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">)</span><span class="token variable">$params</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">filterFor</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;pilots&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Note that a filter can't be required AND multiple.</p> <h2 id="filter-label"><a href="#filter-label" aria-hidden="true" class="header-anchor">#</a> Filter label</h2> <p>To use a custom label for the filter, simply add a <code class="inline"><span class="token function">label</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code> function that returns a string in the Filter class.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">label</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token double-quoted-string string">&quot;My label&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="filter-search"><a href="#filter-search" aria-hidden="true" class="header-anchor">#</a> Filter search</h2> <p>If you need to add a search textfield on top of your filter list, it's as simple as defining this function:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">isSearchable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean constant">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="filter-template"><a href="#filter-template" aria-hidden="true" class="header-anchor">#</a> Filter template</h2> <p>Sometimes you need your filter results to be a little more than a label. For this, use a template; first define a <code class="inline"><span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code> function in the Filter's class:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">template</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token double-quoted-string string">&quot;{{label}}&lt;br&gt;&lt;small&gt;{{detail}}&lt;/small&gt;&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You can also, for more control, return a view here.</p> <p>The template will be <a href="https://vuejs.org/v2/guide/syntax.html" target="_blank" rel="noopener noreferrer">interpreted by Vue.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, meaning you can add data placeholders, DOM structure but also directives, and anything that Vue will parse. It's the same as <a href="/docs/pages/form-fields/autocomplete.html">Autocomplete's templates</a>.</p> <p>You'll need also to change your <code class="inline"><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code> function, returning more than an [&quot;id&quot;=&gt;&quot;value&quot;] array. For instance:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> SpaceshipType<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;label&quot;</span><span class="token punctuation">)</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">[</span>
            <span class="token double-quoted-string string">&quot;id&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$type</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">id</span><span class="token punctuation">,</span>
            <span class="token double-quoted-string string">&quot;label&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$type</span><span class="token operator">=</span><span class="token operator">&gt;</span>label<span class="token punctuation">,</span>
            <span class="token double-quoted-string string">&quot;detail&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$type</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">detail_text</span>
          <span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Note that <strong>the label attribute is mandatory</strong>: it is used for the result display of the filter.</p> <p>Finally, if your filter is also searchable, you'll need a <code class="inline"><span class="token function">searchKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code> function to define which attributes should be searched in the template:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">searchKeys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">array</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token double-quoted-string string">&quot;label&quot;</span><span class="token punctuation">,</span> <span class="token double-quoted-string string">&quot;detail&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="filter-set-callback"><a href="#filter-set-callback" aria-hidden="true" class="header-anchor">#</a> Filter set callback</h2> <p>The third and optional <code class="inline">addFilter</code> argument is a Closure, used as a set value callback.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addFilter</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;pilots&quot;</span><span class="token punctuation">,</span> PilotFilter<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">,</span> EntityListQueryParams <span class="token variable">$params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Filter was set to $value. Do stuff, like putting a value in session.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="master-filter"><a href="#master-filter" aria-hidden="true" class="header-anchor">#</a> Master filter</h2> <p>In some cases (like linked filters, for instance: the second filter values depends on the first one), you want to ensure that selecting a filter value will reset all other filters. It's called: &quot;master&quot;, and you only need to add a <code class="inline"><span class="token function">isMaster</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code> function in your Filter handler:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">isMaster</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> bool
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean constant">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="retained-filters-value-in-session"><a href="#retained-filters-value-in-session" aria-hidden="true" class="header-anchor">#</a> Retained filters value in session</h2> <p>Sometimes you'll want to make the filter's value persistent across calls. Say for example that you have a &quot;country&quot; filter, which is common to several Entity Lists: the idea is to keep the user choice even when he changes the current displayed list.</p> <p>To do that, add a <code class="inline"><span class="token function">retainValueInSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code> function to your filter:</p> <div class="language-php extra-class"><pre class="language-php"><code> <span class="token keyword">class</span> <span class="token class-name">CountryFilter</span> <span class="token keyword">implements</span> <span class="token class-name">EntityListFilter</span>
 <span class="token punctuation">{</span>
     <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     <span class="token punctuation">{</span>
         <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
     <span class="token punctuation">}</span>

     <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">retainValueInSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
     <span class="token punctuation">{</span>
         <span class="token keyword">return</span> <span class="token boolean constant">true</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre></div><p>And that's it, Sharp will keep the filter value in session and ensure it is valued on next requests (if not overridden). This feature works for all types of filters (required, multiple).</p> <div class="warning custom-block"><p>In order to make this feature work, since filters are generalized, you'll need to have unique filters name.</p></div> <h2 id="filters-for-dashboards"><a href="#filters-for-dashboards" aria-hidden="true" class="header-anchor">#</a> Filters for Dashboards</h2> <p><a href="/docs/pages/dashboard.html">Dashboards</a> can too take advantage of filters; the API is almost the same, here's the specifics:</p> <ul><li>There is obviously no Entity or Instance distinction: the only available option are <code class="inline">Code16\<span class="token package">Sharp<span class="token punctuation">\</span>Dashboard<span class="token punctuation">\</span>DashboardFilter</span></code>, <code class="inline">Code16\<span class="token package">Sharp<span class="token punctuation">\</span>Dashboard<span class="token punctuation">\</span>DashboardMultipleFilter</span></code> and <code class="inline">Code16\<span class="token package">Sharp<span class="token punctuation">\</span>Dashboard<span class="token punctuation">\</span>DashboardRequiredFilter</span></code>.</li> <li>Filters must be declared in the <code class="inline"><span class="token function">buildDashboardConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code> method of the Dashboard.</li> <li>And finally, Sharp will not call <code class="inline"><span class="token function">getListData</span><span class="token punctuation">(</span>EntityListQueryParams <span class="token variable">$params</span><span class="token punctuation">)</span></code> but <code class="inline"><span class="token function">buildWidgetsData</span><span class="token punctuation">(</span>DashboardQueryParams <span class="token variable">$params</span><span class="token punctuation">)</span></code>. The API is the same, meaning we can call <code class="inline"><span class="token variable">$params</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">filterFor</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'...'</span><span class="token punctuation">)</span></code>.</li></ul> <h2 id="global-menu-filters"><a href="#global-menu-filters" aria-hidden="true" class="header-anchor">#</a> Global menu Filters</h2> <p>Sometimes you may want to &quot;scope&quot; the entire data set. An example could be a user which can manage several organizations.</p> <p>Instead of adding a filter on almost every Entity List, in this case, you can define a global filter, which will appear like this (on the left menu):</p> <p><img src="/docs/assets/img/global-filter.35053953.png" alt="Example"></p> <p>To achieve this, first write the filter class, like any filter, except it must implement <code class="inline">\<span class="token package">Code16<span class="token punctuation">\</span>Sharp<span class="token punctuation">\</span>Utils<span class="token punctuation">\</span>Filters<span class="token punctuation">\</span>GlobalRequiredFilter</span></code> — meaning it must be a required filter.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name">OrganizationGlobalFilter</span> <span class="token keyword">implements</span> <span class="token class-name">GlobalRequiredFilter</span>
<span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> Organization<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">orderBy</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;name&quot;</span><span class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">pluck</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token double-quoted-string string">&quot;id&quot;</span><span class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">defaultValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> Organization<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">id</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>And then, we declare it in Sharp's config file:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// sharp.php</span>

<span class="token keyword">return</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>

    <span class="token double-quoted-string string">&quot;global_filters&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
        <span class="token double-quoted-string string">&quot;organization&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> OrganizationGlobalFilter<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>

    <span class="token punctuation">[</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>Finally, to get the actual value of the filter on your Entity List or Form classes, you must use <code class="inline">SharpContext</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">app</span><span class="token punctuation">(</span>SharpContext<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">globalFilterFor</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'organization'</span><span class="token punctuation">)</span>
</code></pre></div><p>The usage of SharpContext is <a href="/docs/pages/context.html">detailed here</a>.</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/docs/pages/building-entity-list.html" class="prev">
          Building an Entity List
        </a></span> <span class="next"><a href="/docs/pages/commands.html">
          Commands
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.d35b854f.js" defer></script><script src="/docs/assets/js/2.28d25c3a.js" defer></script><script src="/docs/assets/js/7.b27c5da3.js" defer></script>
  </body>
</html>
