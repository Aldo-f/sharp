(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{204:function(t,a,s){t.exports=s.p+"assets/img/upload.a95c9cc4.gif"},241:function(t,a,s){"use strict";s.r(a);var e=s(2),n=Object(e.a)({},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"upload"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#upload","aria-hidden":"true"}},[t._v("#")]),t._v(" Upload")]),t._v(" "),e("p",[t._v("Class: "),e("code",{staticClass:"inline"},[t._v("Code16\\"),e("span",{staticClass:"token package"},[t._v("Sharp"),e("span",{staticClass:"token punctuation"},[t._v("\\")]),t._v("Form"),e("span",{staticClass:"token punctuation"},[t._v("\\")]),t._v("Fields"),e("span",{staticClass:"token punctuation"},[t._v("\\")]),t._v("SharpFormUploadField")])])]),t._v(" "),e("p",[e("img",{attrs:{src:s(204),alt:"Example"}})]),t._v(" "),e("h2",{attrs:{id:"general-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#general-configuration","aria-hidden":"true"}},[t._v("#")]),t._v(" General configuration")]),t._v(" "),e("p",[t._v('First, in order to get the upload part working, you have to define a "tmp" path where files will be stored until they are moved to the final folder. Here\'s the default:')]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// in config/sharp.php")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"uploads"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"tmp_dir"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"SHARP_UPLOADS_TMP_DIR"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"tmp"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),e("p",[t._v("This "),e("code",{staticClass:"inline"},[t._v("tmp_dir")]),t._v(" path is relative to the "),e("code",{staticClass:"inline"},[t._v("local")]),t._v(" filesystem defined in the Laravel configuration.")]),t._v(" "),e("h2",{attrs:{id:"field-configuration"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#field-configuration","aria-hidden":"true"}},[t._v("#")]),t._v(" Field Configuration")]),t._v(" "),e("h3",{attrs:{id:"setmaxfilesize-float-sizeinmb"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setmaxfilesize-float-sizeinmb","aria-hidden":"true"}},[t._v("#")]),t._v(" "),e("code",{staticClass:"inline"},[e("span",{staticClass:"token function"},[t._v("setMaxFileSize")]),e("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("float "),e("span",{staticClass:"token variable"},[t._v("$sizeInMB")]),e("span",{staticClass:"token punctuation"},[t._v(")")])])]),t._v(" "),e("p",[t._v("Max file size allowed.")]),t._v(" "),e("h3",{attrs:{id:"setcropratio-string-ratio-array-croppablefiletypes-null"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setcropratio-string-ratio-array-croppablefiletypes-null","aria-hidden":"true"}},[t._v("#")]),t._v(" "),e("code",{staticClass:"inline"},[e("span",{staticClass:"token function"},[t._v("setCropRatio")]),e("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("string "),e("span",{staticClass:"token variable"},[t._v("$ratio")]),e("span",{staticClass:"token punctuation"},[t._v(",")]),t._v(" "),e("span",{staticClass:"token keyword"},[t._v("array")]),t._v(" "),e("span",{staticClass:"token variable"},[t._v("$croppableFileTypes")]),t._v(" "),e("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),e("span",{staticClass:"token constant"},[t._v("null")]),e("span",{staticClass:"token punctuation"},[t._v(")")])])]),t._v(" "),e("p",[t._v("Set a ratio constraint to uploaded images, formatted like this: "),e("code",{staticClass:"inline"},[t._v("width"),e("span",{staticClass:"token punctuation"},[t._v(":")]),t._v("height")]),t._v(". For instance: "),e("code",{staticClass:"inline"},[e("span",{staticClass:"token number"},[t._v("16")]),e("span",{staticClass:"token punctuation"},[t._v(":")]),e("span",{staticClass:"token number"},[t._v("9")])]),t._v(", or "),e("code",{staticClass:"inline"},[e("span",{staticClass:"token number"},[t._v("1")]),e("span",{staticClass:"token punctuation"},[t._v(":")]),e("span",{staticClass:"token number"},[t._v("1")])]),t._v(".")]),t._v(" "),e("p",[t._v("When a crop ratio is set, any uploaded picture will be auto-cropped (centered).")]),t._v(" "),e("p",[t._v("The second argument, "),e("code",{staticClass:"inline"},[e("span",{staticClass:"token variable"},[t._v("$croppableFileTypes")])]),t._v(", provide a way to limit the crop configuration to a list of image files extensions. For instance, it can be useful to define a crop for jpg and png, but not for gif because it will destroy animation.")]),t._v(" "),e("h3",{attrs:{id:"setstoragedisk-string-storagedisk"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setstoragedisk-string-storagedisk","aria-hidden":"true"}},[t._v("#")]),t._v(" "),e("code",{staticClass:"inline"},[e("span",{staticClass:"token function"},[t._v("setStorageDisk")]),e("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("string "),e("span",{staticClass:"token variable"},[t._v("$storageDisk")]),e("span",{staticClass:"token punctuation"},[t._v(")")])])]),t._v(" "),e("p",[t._v("Set the destination storage disk (as configured in Laravel's  "),e("code",{staticClass:"inline"},[t._v("config"),e("span",{staticClass:"token operator"},[t._v("/")]),t._v("filesystem"),e("span",{staticClass:"token punctuation"},[t._v(".")]),t._v("php")]),t._v(" config file).")]),t._v(" "),e("h3",{attrs:{id:"setstoragebasepath-string-storagebasepath"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setstoragebasepath-string-storagebasepath","aria-hidden":"true"}},[t._v("#")]),t._v(" "),e("code",{staticClass:"inline"},[e("span",{staticClass:"token function"},[t._v("setStorageBasePath")]),e("span",{staticClass:"token punctuation"},[t._v("(")]),t._v("string "),e("span",{staticClass:"token variable"},[t._v("$storageBasePath")]),e("span",{staticClass:"token punctuation"},[t._v(")")])])]),t._v(" "),e("p",[t._v("Set the destination base storage path. You can use the "),e("code",{staticClass:"inline"},[e("span",{staticClass:"token punctuation"},[t._v("{")]),t._v("id"),e("span",{staticClass:"token punctuation"},[t._v("}")])]),t._v(" special placeholder to add the instance id in the path.")]),t._v(" "),e("p",[t._v("For instance:\n"),e("code",{staticClass:"inline"},[e("span",{staticClass:"token variable"},[t._v("$field")]),e("span",{staticClass:"token operator"},[t._v("-")]),e("span",{staticClass:"token operator"},[t._v(">")]),e("span",{staticClass:"token function"},[t._v("setStorageBasePath")]),e("span",{staticClass:"token punctuation"},[t._v("(")]),e("span",{staticClass:"token single-quoted-string string"},[t._v("'/users/{id}/avatar'")]),e("span",{staticClass:"token punctuation"},[t._v(")")])])]),t._v(" "),e("h3",{attrs:{id:"setfilefilter-filefilter"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setfilefilter-filefilter","aria-hidden":"true"}},[t._v("#")]),t._v(" "),e("code",{staticClass:"inline"},[e("span",{staticClass:"token function"},[t._v("setFileFilter")]),e("span",{staticClass:"token punctuation"},[t._v("(")]),e("span",{staticClass:"token variable"},[t._v("$fileFilter")]),e("span",{staticClass:"token punctuation"},[t._v(")")])])]),t._v(" "),e("p",[t._v("Set the allowed file extensions. You can pass either an array or a comma-separated list.")]),t._v(" "),e("h3",{attrs:{id:"setfilefilterimages"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setfilefilterimages","aria-hidden":"true"}},[t._v("#")]),t._v(" "),e("code",{staticClass:"inline"},[e("span",{staticClass:"token function"},[t._v("setFileFilterImages")]),e("span",{staticClass:"token punctuation"},[t._v("(")]),e("span",{staticClass:"token punctuation"},[t._v(")")])])]),t._v(" "),e("p",[t._v("Just a "),e("code",{staticClass:"inline"},[e("span",{staticClass:"token function"},[t._v("setFileFilter")]),e("span",{staticClass:"token punctuation"},[t._v("(")]),e("span",{staticClass:"token punctuation"},[t._v("[")]),e("span",{staticClass:"token double-quoted-string string"},[t._v('".jpg"')]),e("span",{staticClass:"token punctuation"},[t._v(",")]),e("span",{staticClass:"token double-quoted-string string"},[t._v('".jpeg"')]),e("span",{staticClass:"token punctuation"},[t._v(",")]),e("span",{staticClass:"token double-quoted-string string"},[t._v('".gif"')]),e("span",{staticClass:"token punctuation"},[t._v(",")]),e("span",{staticClass:"token double-quoted-string string"},[t._v('".png"')]),e("span",{staticClass:"token punctuation"},[t._v("]")]),e("span",{staticClass:"token punctuation"},[t._v(")")])]),t._v(" shorthand.")]),t._v(" "),e("h3",{attrs:{id:"setcompactthumbnail-compactthumbnail-true"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#setcompactthumbnail-compactthumbnail-true","aria-hidden":"true"}},[t._v("#")]),t._v(" "),e("code",{staticClass:"inline"},[e("span",{staticClass:"token function"},[t._v("setCompactThumbnail")]),e("span",{staticClass:"token punctuation"},[t._v("(")]),e("span",{staticClass:"token variable"},[t._v("$compactThumbnail")]),t._v(" "),e("span",{staticClass:"token operator"},[t._v("=")]),t._v(" "),e("span",{staticClass:"token boolean constant"},[t._v("true")]),e("span",{staticClass:"token punctuation"},[t._v(")")])])]),t._v(" "),e("p",[t._v("If true and if the upload has a thumbnail, it is limited to 60px high (to compact in a list item, for instance).")]),t._v(" "),e("h2",{attrs:{id:"formatter"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#formatter","aria-hidden":"true"}},[t._v("#")]),t._v(" Formatter")]),t._v(" "),e("p",[t._v("This part is more complex for this field than others...")]),t._v(" "),e("p",[t._v("First, let's mention that Sharp provides an Eloquent built-in solution for uploads with the "),e("code",{staticClass:"inline"},[t._v("SharpUploadModel")]),t._v(" class, as "),e("router-link",{attrs:{to:"/guide/sharp-built-in-solution-for-uploads.html"}},[t._v("detailed here")]),t._v(", which greatly simplify the work.")],1),t._v(" "),e("p",[t._v("Here's the documentation for the non built-in solution:")]),t._v(" "),e("h3",{attrs:{id:"tofront"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tofront","aria-hidden":"true"}},[t._v("#")]),t._v(" "),e("code",{staticClass:"inline"},[t._v("toFront")])]),t._v(" "),e("p",[t._v("The front expects an array with three keys:")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"name"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('""')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Relative file path")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"thumbnail"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('""')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1000px w * 400px h thumbnail full url")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"size"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" x"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Size in bytes")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),e("p",[t._v("The formatter can't handle it automatically, it too project-specific. You'll have to provide this in a custom transformer ("),e("router-link",{attrs:{to:"/guide/how-to-transform-data.html"}},[t._v("see full documentation")]),t._v(") like this:")],1),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("array")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("setCustomTransformer")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"picture"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$value")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$spaceship")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$attribute")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"name"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$spaceship")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("picture")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("name")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"thumbnail"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"size"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$spaceship")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("picture")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token property"}},[t._v("size")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("transform")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            Spaceship"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("findOrFail")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h3",{attrs:{id:"fromfront"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fromfront","aria-hidden":"true"}},[t._v("#")]),t._v(" "),e("code",{staticClass:"inline"},[t._v("fromFront")])]),t._v(" "),e("p",[t._v("There are four cases:")]),t._v(" "),e("h4",{attrs:{id:"newly-uploaded-file"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#newly-uploaded-file","aria-hidden":"true"}},[t._v("#")]),t._v(" newly uploaded file")]),t._v(" "),e("p",[t._v("The formatter will perform any transformation, store the file on the configured location, and return an array like this:")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"file_name"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('""')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Relative file path")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"size"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" x"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// File size in bytes")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"mime_type"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('""')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// File mime type")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"disk"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('""')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Storage disk name")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"transformed"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("true")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// True if the file was transformed")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("It's up to you then to store any of these values in a DB or elsewhere.")]),t._v(" "),e("p",[t._v("Using the "),e("code",{staticClass:"inline"},[t._v("Code16\\"),e("span",{staticClass:"token package"},[t._v("Sharp"),e("span",{staticClass:"token punctuation"},[t._v("\\")]),t._v("Form"),e("span",{staticClass:"token punctuation"},[t._v("\\")]),t._v("Eloquent"),e("span",{staticClass:"token punctuation"},[t._v("\\")]),t._v("WithSharpFormEloquentUpdater")])]),t._v(", you will probably reach a solution like this:")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("array")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$data")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$instance")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$id")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" Spaceship"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("findOrFail")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$id")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Spaceship")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$this")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("ignore")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"picture"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$instance")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$data")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// Then handle $data["picture"] here')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h4",{attrs:{id:"existing-transformed-file"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#existing-transformed-file","aria-hidden":"true"}},[t._v("#")]),t._v(" existing transformed file")]),t._v(" "),e("p",[t._v("In this case, the file was already stored, but was transformed (cropped, or rotated). The formatter will transform the file, store the result and simply return and array with one key:")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token double-quoted-string string"}},[t._v('"transformed"')]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean constant"}},[t._v("true")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("Then you'll have to catch that if needed (to destroy all previous generated thumbnails for instance).")]),t._v(" "),e("h4",{attrs:{id:"deleted-file"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#deleted-file","aria-hidden":"true"}},[t._v("#")]),t._v(" deleted file")]),t._v(" "),e("p",[t._v("The formatter will return null (note that the file "),e("strong",[t._v("will not")]),t._v(" be deleted from the storage).")]),t._v(" "),e("h4",{attrs:{id:"existing-and-unchanged-file"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#existing-and-unchanged-file","aria-hidden":"true"}},[t._v("#")]),t._v(" existing and unchanged file")]),t._v(" "),e("p",[t._v("The formatter will return an empty array.")])])},[],!1,null,null,null);a.default=n.exports}}]);